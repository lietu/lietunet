<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Linux and sleep mode wakeup - Janne "Lietu" Enberg</title><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="@lietux"><meta name=twitter:title content><meta name=twitter:description content><meta name=Description content><meta property="og:title" content="Linux and sleep mode wakeup"><meta property="og:description" content="I just recently battled a long time to get my Windows machine to sleep properly. That is, to automatically go to sleep mode after a timeout, not wake up from sleep mode from useless events like keyboard and mouse, and recover from sleep mode successfully.
In Linux, pretty much everything worked out of the box, even with exotic-ish hardware (Apple Mac Mini), except for not waking up from useless events."><meta property="og:type" content="article"><meta property="og:url" content="https://lietu.net/2012/12/2012-12-23-linux-and-sleep-mode-wakeup/"><meta property="article:section" content="post"><meta property="article:published_time" content="2012-12-23T00:00:00+00:00"><meta property="article:modified_time" content="2012-12-23T00:00:00+00:00"><meta name=application-name content="Janne &#34;Lietu&#34; Enberg"><meta name=apple-mobile-web-app-title content="Janne &#34;Lietu&#34; Enberg"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=icon type=image/png sizes=192x192 href=/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=/android-chrome-512x512.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lietu.net/2012/12/2012-12-23-linux-and-sleep-mode-wakeup/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/lib/prismjs/prism.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Linux and sleep mode wakeup","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lietu.net\/2012\/12\/2012-12-23-linux-and-sleep-mode-wakeup\/"},"genre":"post","wordCount":295,"url":"https:\/\/lietu.net\/2012\/12\/2012-12-23-linux-and-sleep-mode-wakeup\/","datePublished":"2012-12-23T00:00:00+00:00","dateModified":"2012-12-23T00:00:00+00:00","description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header><div class="desktop header" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title='Janne "Lietu" Enberg' class="header-logo logo-svg">Janne "Lietu" Enberg</a></div><div class=menu><nav><h2 class=display-hidden>Основная навигация</h2><ul class=menu-inner><li><a class=menu-item href=/post/>Posts</a></li></ul></nav><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div><div class="mobile header" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title='Janne "Lietu" Enberg' class=header-logo>Janne "Lietu" Enberg</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><nav><h2 class=display-hidden>Основная навигация</h2><ul><li><a class=menu-item href=/post/ title>Posts</a></li></ul></nav><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><span class="svg-icon icon-moon"></span></a></div></div></div></header><main class=main><div class=container><div class="page single special"><h1 class="single-title pulse faster">Linux and sleep mode wakeup</h1><div class=content id=content><p>I just recently battled a long time to get my Windows machine to sleep properly. That is, to automatically go to sleep mode after a timeout, not wake up from sleep mode from useless events like keyboard and mouse, and recover from sleep mode successfully.</p><p>In Linux, pretty much everything worked out of the box, even with exotic-ish hardware (Apple Mac Mini), except for not waking up from useless events.</p><h4>Preventing automatic wakeup from useless events</h4><p>So I had the issue that my Linux desktop was waking up when I touched the mouse or keyboard, this is not a good thing in general, and especially not for me since I have several cats walking around all the time.</p><p>I just recently battled for quite a while with Windows to get it to work, and it was somewhat difficult to find useful and relevant information. It was a nice reminder of how great the Linux community is when I had to do the same thing in Linux.</p><p>It took a single Google query to find all the data I needed (from the first result), and here is the script that will disable waking up from all events except the power button:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=k>for</span> dev in <span class=k>$(</span>cat /proc/acpi/wakeup <span class=p>|</span> grep enabled <span class=p>|</span> cut -f1<span class=k>)</span><span class=p>;</span> <span class=k>do</span> <span class=nb>echo</span> <span class=nv>$dev</span> &gt; /proc/acpi/wakeup<span class=p>;</span> <span class=k>done</span></code></pre></div><p>(Run it as <em>root</em>, <em>su -</em>, or <em>sudo -i</em>)</p><p>What it does, is list all the enabled wakeup devices (<em>cat /proc/acpi/wakeup | grep enabled</em>), and loop through the items on the first column, then echo the name of the device back to the API to toggle their state to disabled.</p><p>They say some devices' state can be reset after a reboot, so it could be useful to put that line in <strong>/etc/rc.local</strong> or similar file on your system.</p></div></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> | Theme - <a href="https://ublogger.netlify.app/?utm_source=https://lietu.net/&utm_medium=footer&utm_campaign=config&utm_term=2.0.1" target=_blank title="uBlogger 2.0.1">uBlogger</a></div><div class=footer-line><i class="svg-icon icon-copyright"></i><span>2021</span></div></div></footer></div><aside id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="svg-icon icon-arrow-up"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="svg-icon icon-comments-fixed"></i></a></aside><script src=/lib/smooth-scroll/smooth-scroll.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{}}</script><script src=/js/theme.min.js></script></body></html>